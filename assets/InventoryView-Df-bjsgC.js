import{u as e,a as t,j as s,M as a,N as n,O as r,P as o,g as l,Q as d,R as i,S as c}from"./index-tQUpmkV-.js";import{r as x}from"./react-vendor-D-3wKq8v.js";import{L as p,P as m,a as u,b,l as h,Z as g,W as j}from"./ui-vendor-CrPKbo4G.js";import"./redux-vendor-CafaKUJ8.js";const f=()=>{const f=e(),v=t(e=>e.inventory.inventory),[N,y]=x.useState(!1),[w,C]=x.useState(""),[k,S]=x.useState(""),[$,q]=x.useState(""),[I,L]=x.useState("");return s.jsxs("div",{className:"space-y-6 max-w-2xl mx-auto pb-20",children:[s.jsxs("header",{className:"flex items-center justify-between border-b border-stone-800 pb-4",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(p,{className:"w-6 h-6 text-stone-400"}),s.jsx("h2",{className:"font-cinzel text-xl text-stone-200",children:"Inventory"})]}),s.jsxs("button",{onClick:()=>y(!0),className:"flex items-center gap-2 px-3 py-1.5 bg-stone-800 hover:bg-stone-700 rounded text-stone-300 transition-colors","data-testid":"add-item-btn",children:[s.jsx(m,{className:"w-4 h-4"}),s.jsx("span",{className:"text-sm font-bold",children:"Add Item"})]})]}),N&&s.jsx("div",{className:"bg-stone-900 border border-stone-700 rounded-lg p-4 animate-in fade-in slide-in-from-top-2",children:s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-bold text-stone-500 uppercase mb-1",children:"Item Name"}),s.jsx("input",{value:w,onChange:e=>C(e.target.value),className:"w-full bg-stone-950 border border-stone-800 rounded px-3 py-2 text-stone-200 focus:border-yellow-900 focus:outline-none",placeholder:"Wand of Fireballs",autoFocus:!0,"data-testid":"item-name-input"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-bold text-stone-500 uppercase mb-1",children:"Description"}),s.jsx("input",{value:k,onChange:e=>S(e.target.value),className:"w-full bg-stone-950 border border-stone-800 rounded px-3 py-2 text-stone-200 focus:border-yellow-900 focus:outline-none",placeholder:"A gnarled wooden wand...","data-testid":"item-desc-input"})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-bold text-stone-500 uppercase mb-1",children:"Max Charges"}),s.jsx("input",{type:"number",value:$,onChange:e=>q(parseInt(e.target.value)||""),className:"w-full bg-stone-950 border border-stone-800 rounded px-3 py-2 text-stone-200 focus:border-yellow-900 focus:outline-none",placeholder:"7","data-testid":"item-charges-input"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-bold text-stone-500 uppercase mb-1",children:"Linked Spells"}),s.jsx("input",{value:I,onChange:e=>L(e.target.value),className:"w-full bg-stone-950 border border-stone-800 rounded px-3 py-2 text-stone-200 focus:border-yellow-900 focus:outline-none",placeholder:"Fireball, Burning Hands","data-testid":"item-spells-input"})]})]}),s.jsxs("div",{className:"flex justify-end gap-2 pt-2",children:[s.jsx("button",{onClick:()=>y(!1),className:"px-3 py-1 text-stone-500 hover:text-stone-300","data-testid":"item-cancel-btn",children:"Cancel"}),s.jsx("button",{onClick:()=>{if(!w.trim())return;const e=I.split(",").map(e=>e.trim()).filter(Boolean),t={id:`item_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,name:w,description:k,spells:e.length>0?e:void 0};$&&"number"==typeof $&&(t.charges={current:$,max:$}),f(n(t)),y(!1),C(""),S(""),q(""),L("")},disabled:!w.trim(),className:"px-4 py-1 btn-primary-action text-sm font-bold rounded disabled:opacity-50","data-testid":"item-create-btn",children:"Create"})]})]})}),s.jsxs("div",{className:"grid gap-3",children:[0===v.length&&!N&&s.jsx("div",{className:"text-center py-12 text-stone-600 italic",children:"Your backpack is empty."}),v.map((e,t)=>s.jsxs("div",{className:"bg-stone-900/40 border rounded-lg p-4 flex flex-col gap-3 group transition-all duration-300 "+(e.equipped?"border-accent shadow-accent-subtle":"border-stone-800 hover:border-stone-700"),"data-testid":`inventory-item-${t}`,children:[s.jsxs("div",{className:"flex items-start justify-between",children:[s.jsxs("div",{className:"space-y-1 flex-1",children:[s.jsxs("div",{className:"flex items-center gap-2",children:["weapon"===e.type&&s.jsx(u,{size:14,className:"text-accent"}),"armor"===e.type&&s.jsx(b,{size:14,className:"text-blue-400"}),s.jsx("h3",{className:"font-display tracking-tight "+(e.equipped?"text-white":"text-stone-300"),children:e.name}),e.charges&&s.jsxs("span",{className:"text-[10px] font-mono bg-stone-950 px-2 py-0.5 rounded text-cyan-500 border border-cyan-900/30",children:[e.charges.current," / ",e.charges.max]})]}),e.description&&s.jsx("p",{className:"text-xs text-stone-500 font-sans",children:e.description}),s.jsxs("div",{className:"flex gap-3 pt-1",children:[e.weaponStats&&s.jsxs("div",{className:"flex items-center gap-1.5 bg-stone-950/50 px-2 py-0.5 rounded border border-white/5",children:[s.jsx("span",{className:"text-[10px] text-muted uppercase tracking-tighter",children:"DMG:"}),s.jsx("span",{className:"text-[11px] text-accent font-display",children:e.weaponStats.damage}),s.jsx("span",{className:"text-[9px] text-muted italic",children:e.weaponStats.damageType})]}),e.armorStats&&s.jsxs("div",{className:"flex items-center gap-1.5 bg-stone-950/50 px-2 py-0.5 rounded border border-white/5",children:[s.jsx("span",{className:"text-[10px] text-muted uppercase tracking-tighter",children:"BASE AC:"}),s.jsx("span",{className:"text-[11px] text-blue-400 font-display",children:e.armorStats.baseAC})]})]})]}),s.jsxs("div",{className:"flex flex-col items-end gap-2",children:[s.jsxs("div",{className:"flex items-center gap-1",children:[("weapon"===e.type||"armor"===e.type)&&s.jsx("button",{onClick:()=>f(a(t)),className:"text-[10px] px-2 py-1 rounded border transition-all uppercase tracking-widest font-bold "+(e.equipped?"bg-accent text-bg-dark border-accent ring-2 ring-accent/20":"bg-stone-800 text-stone-400 border-stone-700 hover:text-white hover:border-white/20"),children:e.equipped?"Equipped":"Equip"}),s.jsx("button",{onClick:()=>{return e=t,void(window.confirm("Delete this item?")&&f(r(e)));var e},className:"p-1.5 hover:bg-red-900/20 rounded text-stone-700 hover:text-red-500 transition-colors opacity-0 group-hover:opacity-100","data-testid":`item-delete-btn-${t}`,title:"Delete Item",children:s.jsx(h,{className:"w-3.5 h-3.5"})})]}),e.charges&&e.charges.current>0&&!e.spells?.length&&s.jsx("button",{onClick:()=>{f(o(t))},title:"Use Charge",className:"p-2 bg-cyan-900/10 hover:bg-cyan-900/20 rounded text-cyan-500 transition-colors border border-cyan-500/20","data-testid":`item-use-charge-btn-${t}`,children:s.jsx(g,{className:"w-4 h-4"})})]})]}),e.spells&&e.spells.length>0&&s.jsx("div",{className:"flex flex-wrap gap-2 pt-2 border-t border-stone-800/50",children:e.spells.filter(Boolean).map(a=>s.jsxs("button",{onClick:()=>((e,t)=>{f(o(e));const s=l.find(e=>e.name===t)||l.find(e=>e.name.toLowerCase()===t.toLowerCase());if(!s)return void f(d(`Unknown spell: ${t}`));const a=(s.rolls??"").toLowerCase(),n=a.includes("attack")?"attack":a.includes("save")?"save":"automatic";f(i({spellId:s.name})),f(c({slotLevel:s.lvl,resolutionMode:n})),f(d(`Casting ${t} from ${v[e].name}...`))})(t,a),disabled:e.charges&&e.charges.current<=0,className:`\n                                            text-[10px] px-2 py-1 rounded border transition-colors flex items-center gap-1\n                                            ${e.charges&&e.charges.current<=0?"bg-stone-950 text-stone-600 border-stone-900 cursor-not-allowed":"bg-stone-800 border-stone-700 text-stone-300 hover:text-white hover:border-stone-500 hover:bg-stone-700"}\n                                        `,title:e.charges?`Cast ${a} (1 charge)`:`Cast ${a}`,"data-testid":`cast-spell-${a.replace(/\s+/g,"-")}`,children:[s.jsx(j,{size:12}),a]},a))})]},t))]})]})};export{f as InventoryView};
